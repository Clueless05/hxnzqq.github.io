<!doctype html>
<html lang="cs">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>For You üíò</title>
  <meta name="description" content="Mal√Ω soukrom√Ω web√≠ƒçek jako d√°rek ‚Äì fixn√≠ obsah, ≈æ√°dn√© nahr√°v√°n√≠ fotek ani editace, jen chill a cute vibes." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Comfortaa:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#5d23e6; --bg2:#6736da; --card:#e0d6ffaa; --text:#1d1d1f; --accent:#6e4dff; --accent2:#7b2cbf;
    }
    *{box-sizing:border-box}
    html,body{height:100%;}
    body{ margin:0; font-family:Poppins,system-ui,-apple-system,sans-serif; color:var(--text);
      background: radial-gradient(90vmax 90vmax at 10% 10%, #d2b0fa 0, transparent 60%),
                  radial-gradient(70vmax 70vmax at 90% 10%, #eee0ff 0, transparent 60%),
                  radial-gradient(100vmax 100vmax at 50% 120%, #e9d5ff 0, transparent 60%),
                  linear-gradient(135deg,var(--bg1),var(--bg2));
      background-attachment: fixed;
    }
    .wrap{max-width:980px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;gap:16px;justify-content:space-between}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{width:56px;height:56px;display:grid;place-items:center;border-radius:16px;background:linear-gradient(135deg,#ff758c,#ff7eb3,#b5fffc);box-shadow:0 10px 30px #ff4d6d55}
    .logo svg{filter:drop-shadow(0 4px 10px #ff4d6d66)}
    h1{font-family:Comfortaa,cursive;font-size:clamp(22px,3.2vw,34px);margin:0}
    .btn{margin-bottom: 5px; cursor:pointer;border:none;padding:12px 16px;border-radius:14px;background:var(--text);color:#fff;font-weight:700;box-shadow:0 6px 20px #0000001a;transition:transform .15s ease, box-shadow .2s ease; display:inline-block; text-decoration:none}
    .btn:hover{transform:translateY(-1px);box-shadow:0 10px 22px #00000022}
    .sub{background:linear-gradient(135deg,var(--accent),var(--accent2));}
    main{display:grid;gap:20px;margin-top:18px}
    .hero{position:relative;overflow:hidden;border-radius:24px;padding:28px;background:linear-gradient(120deg,#ffffff88,#fff0 60%), #fff6; backdrop-filter: blur(8px); border:1px solid #ffffff66; box-shadow:0 20px 60px #00000014}
    .hero h2{font-size:clamp(26px,4.6vw,48px);margin:6px 0 4px}
    .hero p{margin:0;font-size:clamp(14px,2.2vw,18px)}
    .floating-hearts{position:absolute;inset:0;pointer-events:none}
    .card{background:var(--card);backdrop-filter: blur(10px);border:1px solid #ffffff77;border-radius:22px; padding:18px 18px; box-shadow:0 10px 30px #00000012}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .col-6{grid-column:span 12}
    @media(min-width:800px){.col-6{grid-column:span 6}}
    .reasons{columns:1; column-gap:24px; padding-left:18px}
    @media(min-width:800px){.reasons{columns:2}}
    .reasons li{break-inside:avoid;margin:10px 0}
    .note .paper{background:#fff; border:2px dashed #ffafcc; border-radius:18px;padding:16px 16px 22px;font-size:16px;line-height:1.65;min-height:140px}
    .small{font-size:13px;opacity:.8}
    .gallery{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px}
    .gallery .cell{aspect-ratio:1/1.05;border-radius:14px;overflow:hidden;background:#fff8;display:grid;place-items:center;border:1px solid #ffffffaa}
    .gallery img{width:100%;height:100%;object-fit:cover;cursor:zoom-in}
    .toast{position:fixed;left:50%;bottom:18px;transform:translateX(-50%);background:#111;color:#fff;padding:10px 14px;border-radius:12px;font-weight:600;box-shadow:0 8px 20px #0006;opacity:0;pointer-events:none;transition:opacity .2s ease, transform .2s ease;z-index:50}
    .toast.show{opacity:1;transform:translateX(-50%) translateY(-6px)}
    .voucher{display:flex;gap:12px;align-items:center;justify-content:space-between;background:#fff;border:1px dashed #ffcad4;border-radius:14px;padding:12px 14px}
    .voucher .title{font-weight:700}
    .voucher .tag{font-size:12px; background:#ffe3ec;border-radius:999px;padding:4px 8px}
    footer{padding:24px 0;text-align:center;opacity:.7}
    dialog{border:none;border-radius:18px;max-width:720px;width:92%;padding:0;overflow:hidden;box-shadow:0 30px 100px #00000040}
    dialog header{padding:16px 18px;border-bottom:1px solid #eee;background:#fff}
    dialog .body{padding:18px;background:#fff}
    dialog footer{padding:14px;background:#fff;border-top:1px solid #eee}
    .close{background:#eee;color:#111}

    /* Image viewer controls + overrides */
    #viewer{
      background:#000;
      max-width:none;
      width:100vw;
      height:100vh;
      border-radius:0;
      margin:0;
      padding:0;
    }
    #viewer .stage{
      position:relative;
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      background:#000;
      touch-action:pan-y;
    }
    #viewerImg{
      max-width:95vw;
      max-height:90vh;
      width:auto;
      height:auto;
      object-fit:contain;
      display:block;
    }
    .viewer-btn{position:absolute;top:50%;transform:translateY(-50%);border:none;background:#00000066;color:#fff;font-weight:700;border-radius:12px;padding:10px 12px;cursor:pointer}
    .viewer-btn:hover{background:#00000088}
    .viewer-close{position:absolute;top:10px;right:10px;border:none;background:#00000066;color:#fff;border-radius:10px;padding:8px 10px;cursor:pointer}
  </style>
</head>
<body>
  <script>
    const GIRL_NAME = 'Lucka';
    const ACCENT = '#7b2cbf';
    const SONG_URL = 'https://audio.jukehost.co.uk/GBRruEGBy5LQtEI3L0OoK5Xo4LRsDbgt';
    const SECRET_PW = 'Honza<3Lucka';

    // P≈Øvodn√≠ webhook pro "akce" (redeem atd.)
    const DISCORD_WEBHOOK = 'https://discordapp.com/api/webhooks/1431050294510485515/RZhCM2_clO6BLVucA8IE44bsjFIEwqReWrX4JXabZY-6udGXPi2elSYT6oKij3Xk-yf4';
    const DISCORD_WEBHOOK_B64 = 'aHR0cHM6Ly9kaXNjb3JkYXBwLmNvbS9hcGkvd2ViaG9va3MvMTQzMTA1MDI5NDUxMDQ4NTUxNS9SWmhDTTJfY2xPNkJMVnVjQThJRTQ0YnNqRklFd3FSZVdyWDRKWGFiWlktNnVkR1hQaTJlbFNZVDZvS2lqM1hrLXlmNA==';

    // Nov√Ω webhook pro "analytics" klik≈Ø
    const ANALYTICS_WEBHOOK = 'https://discordapp.com/api/webhooks/1431056376628777113/6tw29QSUCiven7SktHcSZRyYU6ej4-RmOHAcZFeLM2PM9izQZtZI6m8PpQOtsEc-fi0s';

    const REASONS = [
      'Um√≠≈° mƒõ uklidnit i kdy≈æ je mi smutno',
      'Miluji tv≈Øj sm√≠ch',
      'Jsi stra≈°nƒõ moc hodn√°',
      'Dƒõl√°≈° z obyƒçejn√Ωch dn≈Ø ty nejlep≈°√≠ dny..',
      'Um√≠≈° ≈ô√≠ct pravdu',
      'Jsi n√°dhern√°, kdy≈æ na mƒõ kouk√°≈°',
      'Vƒõ≈ô√≠m si vedle Tebe v√≠c',
      'S Tebou je domov v≈°ude',
      'D√≠ky Tobƒõ se tƒõ≈°√≠m na ka≈æd√© r√°no',
      'V√≠m, ≈æe Ti m≈Ø≈æu vƒõ≈ôit',
      'Jsi chytr√°',
      'Tvoje oƒçi maj√≠ v sobƒõ klid i bou≈ôi z√°rove≈à',
      'Kdy≈æ se smƒõje≈°, m√°m chu≈• zastavit ƒças',
      'M√°≈° n√°dhern√Ω hlas, kter√Ω chci sly≈°et po≈ô√°d',
      'Um√≠≈° mƒõ pochopit nƒõkdy i bez slov',
      'Kdy≈æ se na mƒõ pod√≠v√°≈°, v≈°echno kolem ztichne',
      'Jsi m≈Øj bezpeƒçn√Ω p≈ô√≠stav',
      'Tv≈Øj dotek dok√°≈æe vyl√©ƒçit i nejvƒõt≈°√≠ stres',
      'Ka≈æd√Ω den s Tebou je jako nov√Ω zaƒç√°tek',
      'Jsi prostƒõ moje Lucka a to mi staƒç√≠',
      'M√°≈° srdce vƒõt≈°√≠ ne≈æ cel√Ω svƒõt',
      'Um√≠≈° mƒõ rozesm√°t i v nejhor≈°√≠ den',
      'Kdy≈æ se zlob√≠≈°, stejnƒõ jsi roztomil√°',
      'Tv√° v≈Ønƒõ mi d√°v√° pocit domova',
      'V≈ædycky v√≠≈°, co ≈ô√≠ct',
      'Nikdy se nep≈ôetva≈ôuje≈°',
      'Tvoje up≈ô√≠mnost je vz√°cn√°',
      'Um√≠≈° b√Ωt siln√°, i kdy≈æ ti ≈æivot.. Nebo na≈°e h√°d√°n√≠ h√°z√≠ klacky pod nohy',
      'Kdy≈æ mƒõ obejme≈°, svƒõt se sprav√≠',
      'M√°≈° v sobƒõ kouzlo, kter√© nejde popsat',
      'Vƒõ≈ô√≠m, ≈æe jsme se mƒõli potkat',
      'Tvoje energie je naka≈æliv√°',
      'Jsi m≈Øj klid i m≈Øj chaos z√°rove≈à',
      'Tvoje my≈°len√≠ mƒõ inspiruje',
      'S Tebou je v≈°echno opravdov√©',
      'D√≠ky Tobƒõ se sna≈æ√≠m b√Ωt lep≈°√≠m ƒçlovƒõkem',
      'Um√≠≈° dƒõlat i obyƒçejn√© vƒõci v√Ωjimeƒçn√Ωmi',
      'Tv≈Øj √∫smƒõv by mohl zachr√°nit svƒõt',
      'Nikdy se nenud√≠m, kdy≈æ jsi se mnou',
      'Jsi m≈Øj andƒõl v lidsk√© podobƒõ',
      'Um√≠≈° milovat cel√Ωm srdcem',
      'Jsi d≈Øvod, proƒç se tƒõ≈°√≠m na z√≠t≈ôek',
      'Tvoje p≈ô√≠tomnost mi dod√°v√° s√≠lu',
      'Dok√°≈æe≈° mƒõ rozesm√°t, i kdy≈æ se na to nec√≠t√≠m',
      'M√°≈° du≈°i, kterou bych poznal i mezi miliony',
      'Kdy≈æ sp√≠≈°, vypad√°≈° jako andƒõl',
      'Tv≈Øj smysl pro humor je top',
      'M√°me podobn√Ω music taste',
      'M√°≈° fakt kr√°sn√Ω oƒçi',
      'Chci s tebou pl√°novat budoucnost',
      'Nikdo mƒõ nedok√°≈æe obejmout jako Ty',
      'Um√≠≈° mƒõ p≈ôekvapit i maliƒçkostmi',
      'Nikdy nezapomene≈° na maliƒçkosti',
      'Um√≠≈° ≈ô√≠ct v≈°echno tak, ≈æe to d√°v√° smysl',
      'Tvoje oƒçi jsou moje obl√≠ben√© m√≠sto',
      'Um√≠≈° b√Ωt jemn√° i siln√° z√°rove≈à',
      'Ka≈æd√Ω den s Tebou je dar',
      'Jsi v√Ωjimeƒçn√°, i kdy≈æ to sama nevid√≠≈°',
      'Nikdy se nep≈ôestanu divit, jak √∫≈æasn√° jsi',
      'Um√≠≈° promƒõnit ticho v pohodl√≠',
      'Tv≈Øj hlas mƒõ uklid≈àuje v√≠c ne≈æ hudba',
      'Chci aby na≈°e dƒõti mƒõli tvou kr√°su',
      'V√≠m ≈æe kdy≈æ m√°m ≈°patn√Ω den, m≈Ø≈æu se spolehnout ≈æe ty tu se mnou bude≈°',
      'Miluju koukat na tebe.. jsi jako n√°dhern√Ω film',
      'S tebou m√°m chu≈• chodit do ≈°koly',
      'V√≠m, ≈æe tƒõ m≈Ø≈æu milovat tak, jak to dok√°≈æu',
      'Kdy≈æ se d√≠v√°≈° na svƒõt, vid√≠≈° v nƒõm kr√°su',
      'D√≠ky Tobƒõ m√°m chu≈• ≈æ√≠t naplno',
      'Jsi ten nejhezƒç√≠ chaos, co mƒõ potkal',
      'Nikdo mƒõ nech√°pe jako Ty',
      'I kdy≈æ jsi moje l√°ska, m≈Ø≈æu tƒõ br√°t i jako nejlep≈°√≠ kamar√°dku',
      'S Tebou m≈Ø≈æu b√Ωt s√°m sebou',
      'Ka≈æd√Ω moment s Tebou m√° smysl',
      'M√°≈° √∫≈æasnou schopnost uklidnit mƒõ jen pohledem',
      'Tvoje vlasy bych mohl hladit vƒõƒçnƒõ',
      'Nikdy mƒõ neunav√≠ Tƒõ pozn√°vat',
      'Jsi ta nejhezƒç√≠ ƒç√°st m√©ho dne',
      'Um√≠≈° mƒõ milovat i v m√Ωch chyb√°ch',
      'Kdy≈æ jsi smutn√°, chci Tƒõ chr√°nit p≈ôed cel√Ωm svƒõtem',
      'L√°sko moje.. prostƒõ Tƒõ miluju. ‚ù§Ô∏è'
    ];

    const LETTER = `Moje nejmilej≈°√≠ Lucko,
nƒõkdy si ≈ô√≠k√°m jak je mo≈æn√©, ≈æe se do jednoho ƒçlovƒõka vejde tolik svƒõtla. Kdy≈æ jsi nabl√≠zku, vƒõci kolem najednou d√°vaj√≠ smysl... I ticho s tebou je pln√© klidu, jistoty a ≈°tƒõst√≠. Tvoje p≈ô√≠tomnost je pro mƒõ jako tepl√° deka v chladn√©m r√°nu, jako prvn√≠ p√≠sniƒçka co si pust√≠m na Spotify po n√°roƒçn√©m dni. S tebou se c√≠t√≠m hezky.. Proto ti p√≠≈°u tento tajn√Ω dopis po tom co jsi spr√°vnƒõ "Rozlu≈°tila" heslo.

Miluju zp≈Øsob, jak√Ωm se smƒõje≈°, jak mi nƒõkdy rozum√≠≈° d≈ô√≠v, ne≈æ stihnu nƒõco ≈ô√≠ct, a jak dok√°≈æe≈° promƒõnit smutek ve mƒõ ve ≈°tƒõst√≠. S tebou se c√≠t√≠m ≈æe mi nƒõkdo rozum√≠.. Kdy≈æ mƒõ dr≈æ√≠≈° za ruku, m√°m pocit, ≈æe i kdyby se svƒõt na chvilku rozpadal, spolu to v≈ædycky poskl√°d√°me zp√°tky.
Nejsme dokonal√≠, nƒõkdy se uƒç√≠me b√Ωt trpƒõliv√≠. Ale pr√°vƒõ v tom je to skuteƒçn√©. Ty jsi moje odvaha, m≈Øj p≈ô√≠stav i m≈Øj smƒõr. Ka≈æd√Ω den se d√≠ky tobƒõ chci A SNA≈Ω√çM SE st√°t  lep≈°√≠m ƒçlovƒõkem laskavƒõj≈°√≠m, klidnƒõj≈°√≠m, v√≠c pozorn√Ωm k maliƒçkostem.

Chci s tebou budit se do de≈°tiv√Ωch r√°n i us√≠nat po dlouh√Ωch dnech, pl√°novat i improvizovat, sm√°t se hloup√Ωm vtip≈Øm, koukat na oblohu, mlƒçet, kdy≈æ to bude pot≈ôeba, a mluvit, kdy≈æ se nƒõco bude d√≠t. Chci ti dƒõlat sn√≠danƒõ do postele, chodit na dlouh√© proch√°zky, d√≠vat se na filmy, kter√© miluje≈°, a p≈ôipom√≠nat ti jak tƒõ miluju.. abys to c√≠tila..

A≈• se dƒõje cokoliv, jsem tady. Pro tvoje radosti i starosti, pro sm√≠ch i slzy, pro dny, kdy se v≈°echno da≈ô√≠, i pro ty, kdy staƒç√≠ jen obejmout a chv√≠li nic ne≈ôe≈°it. Dƒõkuju, ≈æe tu se mnou jsi. Dƒõkuju.. Dƒõkuju, ≈æe se mnou buduje≈° nƒõco, co m√° hloubku.
Miluju tƒõ dnes, z√≠tra a po≈ô√°d..
Nav≈ædy tv≈Øj
 Honz√≠k üíå`;

    const VOUCHERS = [
      { title:'Sn√≠danƒõ do postele', tag:'kdykoli' },
      { title:'Objet√≠ a pusinky', tag:'relax' },
      { title:'Film podle Tv√©ho v√Ωbƒõru', tag:'movie night' },
      { title:'Proch√°zka + hork√° ƒçokol√°da', tag:'cozy' },
      { title:'Veƒçe≈ôe podle Tv√©ho v√Ωbƒõru', tag:'rande' },
      { title:'Den offline jen spolu', tag:'offline' },
      { title:'Game night', tag:'chill' },
    ];

    // Galerie SEM P≈òIDEJ FOTKY DEBILE NE ≈ΩE NA TO ZAPOMENE≈†
    const GALLERY = [ ];

    document.documentElement.style.setProperty('--accent', ACCENT);

    // ====== Webhook helpery ======
    function getWebhookUrl(){
      if (DISCORD_WEBHOOK && DISCORD_WEBHOOK.startsWith('http')) return DISCORD_WEBHOOK;
      if (DISCORD_WEBHOOK_B64){ try { return atob(DISCORD_WEBHOOK_B64.trim()); } catch {} }
      return '';
    }
    async function sendWebhook(url, content){
      if(!url) return;
      const payload = { content, username: 'ForYou Notifier', allowed_mentions: { parse: [] } };
      try { await fetch(url, { method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload) }); }
      catch (e) { console.warn('Webhook failed', e); }
    }
    async function sendDiscord(content){ return sendWebhook(getWebhookUrl(), content); }
    async function sendAnalytics(event, meta={}){
      const when = new Date().toISOString();
      const info = { event, when, ...meta };
      return sendWebhook(ANALYTICS_WEBHOOK, 'üìä ' + JSON.stringify(info));
    }

    // Sparkle efekt (pro redeem)
    function sparkle(x,y){
      const count = 18;
      for(let i=0;i<count;i++){
        const s = document.createElement('span');
        s.textContent = '‚ú¶';
        s.style.cssText = `position:fixed; left:${x}px; top:${y}px; font-size:${Math.random()*10+10}px; color:hsl(${260+Math.random()*40} 90% 60%); pointer-events:none;`;
        document.body.appendChild(s);
        const ang = Math.random()*Math.PI*2;
        const dist = 40 + Math.random()*70;
        const dx = Math.cos(ang)*dist;
        const dy = Math.sin(ang)*dist;
        s.animate([{transform:'translate(0,0)', opacity:1}, {transform:`translate(${dx}px,${dy}px)`, opacity:0}], {duration:700+Math.random()*400, easing:'ease-out'}).onfinish = ()=> s.remove();
      }
    }
  </script>

  <div class="wrap">
    <header>
      <div class="brand"></div>
      <div class="cta">
        <a class="btn" id="musicBtn" href="#">Zapnout p√≠sniƒçku</a>
        <a class="btn sub" id="secretBtn" href="#">Tajn√Ω dopis ‚úâÔ∏è</a>
      </div>
    </header>

    <section class="hero">
      <div class="floating-hearts" aria-hidden="true"></div>
      <h2>Ahoj l√°sko, tohle je mal√Ω web jen pro Tebe. üí´</h2>
      <p>Je to tv√© m√≠steƒçko na hezk√© chvilky. Klikni kamkoliv pro mal√© confetti, zapni sv≈Øj song a projdi si tady v≈°e. Tr√°v√≠m nad t√≠m ƒças pro tebe.</p>
      <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap">
        <a class="btn" href="#reasonsSection" id="goReasons">D≈Øvody</a>
        <a class="btn" href="#gallery" id="goGallery">Galerie</a>
        <a class="btn" href="#vouchers" id="goVouchers">Vouchery</a>
      </div>
    </section>

    <main>
      <section id="reasonsSection" class="card">
        <h3 style="margin:0 0 6px">D≈Øvody, proƒç Tƒõ miluju</h3>
        <ol class="reasons" id="reasons"></ol>
        <div class="small" style="display:flex;gap:10px;align-items:center;justify-content:space-between">
          <span>Poƒçet: <span id="reasonsCount"></span></span>
          <button id="reasonsToggle" class="btn sub" style="padding:8px 12px">Zobrazit v≈°echny d≈Øvody ‚ù§Ô∏è</button>
        </div>
      </section>

      <section class="card note">
        <h3 style="margin:0 0 8px">Kr√°tk√Ω vzkaz pro Tebe</h3>
        <div class="paper" id="note">Nejsme dokonal√≠, a nƒõkdy se spolu h√°d√°me. Ale to, co m√°me, je skuteƒçn√©. Miluju Tƒõ tak, jak jsi, se v≈°√≠m, co k tobƒõ pat≈ô√≠. üíû</div>
      </section>

      <section id="gallery" class="card">
        <h3 style="margin:0 0 10px">Galerie</h3>
        <div class="gallery" id="grid"></div>
      </section>

      <section id="vouchers" class="card">
        <h3 style="margin:0 0 10px">Vouchery na p≈ô√°n√≠ üéüÔ∏è</h3>
        <div id="voucherList" class="grid" style="grid-template-columns:repeat(auto-fit,minmax(260px,1fr))"></div>
      </section>
    </main>

    <footer>
      Vyrobeno s l√°skou ¬∑ Stiskni <kbd>H</kbd> pro virtu√°ln√≠ objet√≠ üíû
    </footer>
  </div>

  <!-- Heslo k dopisu -->
  <dialog id="pw">
    <header>
      <strong>Zadej heslo</strong>
    </header>
    <div class="body">
      <input id="pwInput" type="password" placeholder="Heslo" style="width:100%;padding:12px 14px;border:1px solid #ddd;border-radius:12px"/>
      <div class="small" style="margin-top:6px;opacity:.7">P≈ôi spr√°vn√©m hesle se dopis otev≈ôe. üíú</div>
    </div>
    <footer style="display:flex;gap:8px;justify-content:flex-end">
      <button class="close" id="pwCancel">Zru≈°it</button>
      <button id="pwOk">Otev≈ô√≠t</button>
    </footer>
  </dialog>

  <!-- Tajn√Ω dopis -->
  <dialog id="secret">
    <header>
      <strong>Soukrom√Ω dopis</strong>
    </header>
    <div class="body">
      <p id="letterText"></p>
    </div>
    <footer style="display:flex;gap:8px;justify-content:flex-end">
      <button class="close" id="closeSecret">Zav≈ô√≠t</button>
    </footer>
  </dialog>

  <!-- Image viewer -->
  <dialog id="viewer">
    <div class="stage">
      <img id="viewerImg" alt="Photo"/>
      <button id="viewerPrev" class="viewer-btn" style="left:10px; opacity:0;">‚Äπ</button>
      <button id="viewerNext" class="viewer-btn" style="right:10px; opacity:0;">‚Ä∫</button>
      <button id="viewerClose" class="viewer-close">‚úï</button>
    </div>
  </dialog>

  <div class="toast" id="toast">Yay ‚ú®</div>

  <audio id="song" preload="auto"></audio>

  <script>
    // Mini util
    const $ = (q,root=document)=>root.querySelector(q);

    // Decorative hearts
    const hearts = document.querySelector('.floating-hearts');
    const spawn = ()=>{
      const s = document.createElement('span');
      const size = Math.random()*18+6;
      s.style.cssText = `position:absolute; left:${Math.random()*100}% ; bottom:-20px; font-size:${size}px; opacity:${Math.random()*0.7+0.2}`;
      s.textContent = '‚ù§';
      hearts.appendChild(s);
      const duration = 4000 + Math.random()*4000;
      s.animate(
        [{ transform:'translateY(0) scale(1)' },
         { transform:`translateY(-120px) translateX(${(Math.random()*2-1)*60}px) scale(${1+Math.random()*0.6})` }],
        { duration, easing:'ease-out' }
      ).onfinish = ()=> s.remove();
    };
    setInterval(spawn, 320);

    // Confetti (nepos√≠l√°m analytics ‚Äì je to ka≈æd√© kliknut√≠ do pozad√≠)
    document.addEventListener('click', (e)=>{
      if(e.target.closest('a,button,dialog')) return;
      const count = 12;
      for(let i=0;i<count;i++){
        const p = document.createElement('i');
        p.style.cssText = `position:fixed; left:${e.clientX}px; top:${e.clientY}px; width:6px; height:6px; background:hsl(${Math.random()*360} 80% 60%); border-radius:2px; pointer-events:none;`;
        document.body.appendChild(p);
        const dx = (Math.random()*2-1)*120;
        const dy = (Math.random()*-1)*200 - 60;
        p.animate([{transform:'translate(0,0)',opacity:1},{transform:`translate(${dx}px, ${dy}px)`,opacity:0}],
                  {duration:700+Math.random()*500, easing:'cubic-bezier(.17,.67,.29,1.27)'}).onfinish = ()=>p.remove();
      }
    });

    // Reasons (collapsible to 100+)
    const list = $('#reasons');
    const toggle = $('#reasonsToggle');
    const countEl = $('#reasonsCount');
    const INITIAL_COUNT = 10;
    let expanded = false;

    function renderReasons(){
      list.innerHTML = '';
      const items = expanded ? REASONS : REASONS.slice(0, INITIAL_COUNT);
      items.forEach(txt=>{ const li=document.createElement('li'); li.textContent=txt; list.appendChild(li) });
      countEl.textContent = expanded ? REASONS.length : `${Math.min(INITIAL_COUNT, REASONS.length)}/${REASONS.length}`;
      if(REASONS.length > INITIAL_COUNT){
        toggle.style.display = 'inline-block';
        toggle.textContent = expanded ? 'Zobrazit m√©nƒõ üíú' : 'Zobrazit v≈°echny d≈Øvody ‚ù§Ô∏è';
      } else {
        toggle.style.display = 'none';
      }
    }
    renderReasons();
    toggle.addEventListener('click', ()=>{
      expanded = !expanded; renderReasons();
      sendAnalytics('reasons_toggle', { expanded });
    });

    // Letter + Password gate
    const secret = $('#secret');
    const letterText = $('#letterText');
    letterText.textContent = LETTER.replace('${GIRL_NAME}', GIRL_NAME);

    const pw = $('#pw');
    const pwInput = $('#pwInput');
    const pwOk = $('#pwOk');
    const pwCancel = $('#pwCancel');

    $('#secretBtn').addEventListener('click', ()=>{
      pw.showModal(); pwInput.value=''; setTimeout(()=>pwInput.focus(),50);
      sendAnalytics('secret_prompt_open');
    });
    function tryOpenSecret(){
      if(pwInput.value === SECRET_PW){
        pw.close(); secret.showModal();
        sendAnalytics('secret_open_success');
      } else {
        pwInput.animate([{transform:'translateX(0)'},{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}],{duration:220});
        const t=$('#toast'); t.textContent='≈†patn√© heslo'; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1200);
        sendAnalytics('secret_open_fail');
      }
    }
    pwOk.addEventListener('click', tryOpenSecret);
    pwCancel.addEventListener('click', ()=> { pw.close(); sendAnalytics('secret_prompt_cancel'); });
    pwInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter') tryOpenSecret() });
    $('#closeSecret').addEventListener('click', ()=> { secret.close(); sendAnalytics('secret_close'); });
    secret.addEventListener('click', (e)=>{ if(e.target === secret){ secret.close(); sendAnalytics('secret_close_backdrop'); } });

    // Gallery (s pr√°zdn√Ωm stavem) + Image Viewer
    const grid = $('#grid');
    if(Array.isArray(GALLERY) && GALLERY.length > 0){
      GALLERY.forEach((src,idx)=>{
        const cell=document.createElement('div'); cell.className='cell';
        cell.innerHTML=`<img src="${src}" alt="photo ${idx+1}" data-index="${idx}">`;
        grid.appendChild(cell);
      });
    } else {
      grid.innerHTML = '<div class="small" style="text-align:center;padding:10px 0;">Zat√≠m nem√°me spoleƒçn√© fotky üíú</div>';
    }

    // Image Viewer logic
    const viewer = $('#viewer');
    const viewerImg = $('#viewerImg');
    const btnPrev = $('#viewerPrev');
    const btnNext = $('#viewerNext');
    const btnClose = $('#viewerClose');
    let currentIdx = 0;

    function openViewer(i){
      if(!Array.isArray(GALLERY) || !GALLERY.length) return;
      currentIdx = (i+GALLERY.length)%GALLERY.length;
      viewerImg.src = GALLERY[currentIdx];
      if(!viewer.open) viewer.showModal();
      sendAnalytics('viewer_open', { index: currentIdx, src: GALLERY[currentIdx] });
    }
    function nextImg(){ openViewer(currentIdx+1); sendAnalytics('viewer_next', { index: currentIdx }); }
    function prevImg(){ openViewer(currentIdx-1); sendAnalytics('viewer_prev', { index: currentIdx }); }

    grid.addEventListener('click', (e)=>{
      const img = e.target.closest('img');
      if(!img) return;
      const i = Number(img.dataset.index)||0;
      openViewer(i);
    });
    btnClose.addEventListener('click', ()=> { viewer.close(); sendAnalytics('viewer_close'); });
    btnNext.addEventListener('click', nextImg);
    btnPrev.addEventListener('click', prevImg);
    viewer.addEventListener('click', (e)=>{ if(e.target === viewer){ viewer.close(); sendAnalytics('viewer_close_backdrop'); } });

    // Vouchers (visual-only)
    const listV = $('#voucherList');
    const chime = new Audio('data:audio/wav;base64,UklGRmQAAABXQVZFZm10IBAAAAABAAEAESsAACJWAAACABYAZGF0YQAAABz/AAAAAP8AAAD/AAAAAP8AAP//AAAA//8AAAD/AAAAAP8AAAD/AAAAAP8AAP//AAAA//8AAAD/AAAAAP8AAAD/AAAAAP8AAP//AAAA//8AAAA=');
    VOUCHERS.forEach(v=>{
      const el = document.createElement('div'); el.className='voucher';
      el.innerHTML = `<div><div class="title">${v.title}</div><div class="tag">${v.tag}</div></div>` +
        `<div style="display:flex;gap:8px"><button class="btn" style="padding:8px 12px">Redeem</button></div>`;
      el.querySelector('button').onclick = ()=>{
        el.style.opacity=.55; el.style.filter='grayscale(1)';
        el.animate([{transform:'scale(1)'},{transform:'scale(1.04)'},{transform:'scale(1)'}],{duration:420,easing:'ease-out'});
        const rect = el.getBoundingClientRect(); sparkle(rect.left + rect.width/2, rect.top + rect.height/2);
        try { chime.currentTime = 0; chime.play(); } catch {}
        const t=$('#toast'); t.textContent='Voucher redeemed ‚úì'; t.classList.add('show'); setTimeout(()=>t.classList.remove('show'),1200);
        const when = new Date().toLocaleString('cs-CZ');
        // P≈Øvodn√≠ notifikace do hlavn√≠ho webhooku
        sendDiscord(`üéüÔ∏è Lucka pr√°vƒõ redeemnula voucher: **${v.title}** (${v.tag}) ‚Ä¢ ${when}`);
        // Analytics z√°znam
      };
      listV.appendChild(el);
    });

    // Music
    const song = $('#song'); song.src = SONG_URL;
    $('#musicBtn').onclick = (e)=>{
      e.preventDefault();
      if(song.paused){ song.play(); e.target.textContent='Vypnout p√≠sniƒçku'; }
      else { song.pause(); e.target.textContent='Zapnout p√≠sniƒçku'; }
      sendAnalytics('music_toggle', { state: song.paused ? 'off' : 'on' });
    };

    // CTA v hero
    $('#goReasons').addEventListener('click', ()=> sendAnalytics('nav_click', { target:'#reasonsSection' }));
    $('#goGallery').addEventListener('click', ()=> sendAnalytics('nav_click', { target:'#gallery' }));
    $('#goVouchers').addEventListener('click', ()=> sendAnalytics('nav_click', { target:'#vouchers' }));

    // Generick√Ω log ka≈æd√©ho .btn (lehce duplicitn√≠, ale pro p≈ôehled)
    document.addEventListener('click', (e)=>{
      const b = e.target.closest('.btn');
      if(!b) return;
      const id = b.id || null;
      const text = (b.textContent||'').trim().slice(0,60);
      sendAnalytics('button_click', { id, text });
    });

    // Hotkeys: H = hug, ESC = zav≈ô√≠t viewer/secret, ≈°ipky listov√°n√≠
    document.addEventListener('keydown', (e)=>{
      if(e.key.toLowerCase()==='h'){ hug(); sendAnalytics('hotkey_hug'); }
      if(e.key==='Escape'){
        if(viewer && viewer.open) { viewer.close(); sendAnalytics('viewer_close_esc'); return; }
        if(secret && secret.open) { secret.close(); sendAnalytics('secret_close_esc'); return; }
      }
      if(viewer && viewer.open){
        if(e.key==='ArrowRight') nextImg();
        if(e.key==='ArrowLeft') prevImg();
      }
    });

    function hug(){
      const centerX = innerWidth/2, centerY = innerHeight/2;
      const count = 80;
      for(let i=0;i<count;i++){
        const p = document.createElement('i');
        const hue = 260 + Math.random()*40;
        p.style.cssText = `position:fixed; left:${centerX}px; top:${centerY}px; width:5px; height:5px; background:hsl(${hue} 85% 60%); border-radius:999px; pointer-events:none;`;
        document.body.appendChild(p);
        const angle = Math.random()*Math.PI*2;
        const dist = (Math.random()**.6) * 220;
        const dx = Math.cos(angle)*dist;
        const dy = Math.sin(angle)*dist;
        p.animate([{transform:'translate(0,0)',opacity:1},{transform:`translate(${dx}px, ${dy}px)`,opacity:0}],
                  {duration:900+Math.random()*700, easing:'cubic-bezier(.17,.67,.29,1.27)'}).onfinish = ()=>p.remove();
      }
      if(navigator.vibrate) navigator.vibrate(40);
    }
  </script>
</body>
</html>
